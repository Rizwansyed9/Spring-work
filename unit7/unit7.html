<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {height: 100%;
    margin: 0;
    
padding:5px;}
h3{
 
color:#212121;
}
h4{
color:#1b1b1b;
}
p,li{
  font-size: 16px;
color:#757575;
}
.card {
background-color:#ffffff;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    transition: 0.3s;

}

.card:hover {
    box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
}

.container {

    padding: 1px 8px;
}
code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	 font-size: 12px;
  line-height: 1.375;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;


	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #f8f8f2;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

pre.line-numbers {
	position: relative;
	padding-left: 3.8em;
	counter-reset: linenumber;
}

pre.line-numbers > code {
	position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
	position: absolute;
	pointer-events: none;
	top: 0;
	font-size: 100%;
	left: -3.8em;
	width: 3em; /* works for line-numbers below 1000 lines */
	letter-spacing: -1px;
	border-right: 1px solid #999;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;

}

	.line-numbers-rows > span {
		pointer-events: none;
		display: block;
		counter-increment: linenumber;
	}

		.line-numbers-rows > span:before {
			content: counter(linenumber);
			color: #999;
			display: block;
			padding-right: 0.8em;
			text-align: right;
		}
.tip {
    background-image: url(https://www.w3schools.in/wp-content/uploads/tip.png);
    padding: 10px 10px 10px 50px;
    background-position: 10px 20px;
    background-repeat: no-repeat;
	display: table;
    border: 2px solid #DDD;
    border-left: 3px solid #32cd32;
    margin-left: 0;


    border-radius: 3px;
}
.tip2{
  padding: 10px 10px 10px 10px;
    background-position: 10px 20px;
    background-repeat: no-repeat;
	display: table;
    border: 2px solid #DDD;
    border-left: 3px solid #32cd32;
    margin-left: 0;


    border-radius: 3px;

}

img {
    max-width: 100%;
    max-height: 100vh;
    height: auto;
}

table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 100%;
}

td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
}

tr:nth-child(even) {
    background-color: #dddddd;
}

</style>
</head>
<body>


<div class="card">
 
  <div class="container">
  <h3>Spring Transaction Support</h3>
<p>Spring transaction framework provides a consistent abstraction across transaction management API's. Any application extensively requires transaction management capabilities to handle its business operations consistently.<br><br> 
In a traditional Java or J2ee programming, developer has two choices for Transaction management. Those are Global or Local transactions; each of them has specific use cases where they have to be used</p>    
<p  style="font-weight:bold;color:#212121">Global Transaction</p>
<p>Global transactions are also called as XA Transactions, a transaction is said to be Global or XA only when multiple resources are involved in it. Typically the resources would be a database and a message queues etc. When we say these two resources are involved in a transaction, it means performing the operation on a database and on a messaging queue should be part of single transaction and if a roll back happens it should roll back the operations on both the resources rather than one.<br><br> 
The below figure shows the transactional boundaries in a Global transaction and Local Transaction.</p>
<img src="../images/seven1.jpg" width="100%" height="200px">
<p>The participating resources of a global transaction must be also XA resources rather than local resources. For example while configuring a Datasource to get the connection, the application server will give you an option of selecting the Datasource as XA or non-XA, this indicates whether the connections that are created out of that datasource will participate in global transactions or not. </p>
<p  style="font-weight:bold;color:#212121">Two-Phase commit </p>
<p>Global transaction will use the two phase commit process. This indicates the global transaction will be managed by a Transaction coordinator (also called as TransactionManager). Every resource in the transaction is maintained by the ResourceManager and executes the transaction as described below.</p>
<p>Phase - I</p>
<ol>
<li>Each ResourceManager coordinates the local operations and writes them to log</li>
<li>If successful operations, response is OK</li>
</ol>
<p>Phase - II -- If all ResourceManager's responds OK</p>
<ol>
<li>Coordinator Issues commit on all resource managers</li>
<li>Participants complete the commit process and writes to log file</li>
</ol>
<p>Otherwise:</p>
<ol>
<li>Coordinator issues roll back to all the resourcemanagers.</li>
<li>Participants undoâ€™s all the operations locally.</li>
</ol>
<p>In order to work with Global Transactions or Distributed transactions, you need a Transaction Coordinator which will be maintained by a J2EE Server. To work with XA Transactions, J2EE has provided api's like JTA or EJB etc.<br><br> 
In JTA you need to programmatically manage transactions, and the API complex to work with and need to perform JNDI lookup to get the TransactionCordinator from J2EE server.<br><br> 
You can use declarative transaction management using EJB's, but EJB's are heavy wait components and may not be appropriate for whom who are looking for only Global Transaction solution (as EJB are distributed components).</p>
<div style="text-align: left; background:#696969; padding:7px;"><span style="font-weight:bold;color:#ffffff">Local Transaction</span></div>
<p>Local Transaction is transaction which involves only one resource as part of transactional boundary. If you are working with database and message queue each and every operation that has been done are committed separately, rather than part of single transaction. The above figure depicts the same.<br><br> 
In a local transaction, the commit of a transaction will be done on the resource directly for example while you are working on JDBC, you will issue a commit on directly the connection using con.commit()</p>
<div style="text-align: left; background:#696969; padding:7px;"><span style="font-weight:bold;color:#ffffff">Benefit of Spring Transaction</span></div>
<p>By the above we understood that working with global and local transactions needs two different API's and need to learn two different API's. Your code is tightly coupled with one transaction implementation, and if you want to switch between local and global or with in global you need to modify your code. Instead spring transaction management capability has provided a unified approach that allows you to work with local or global transactions transparently.<br><br> 
Spring has provided three ways of working with transactions.</p>
<ol>
<li>Programmatic transaction management</li>
<li>Declarative transaction management</li>
<li>Annotation driven transaction managemen</li>
</ol>
<p>Out of which developers extensively uses declarative transaction management.</p>
<div style="text-align: left; background:#696969; padding:7px;"><span style="font-weight:bold;color:#ffffff">Declarative Transaction Management</span></div>
<p>In a declarative transaction management approach, the developer will declare the transactional semantics in a configuration file rather than programming it using code. The main advantage with this is instead of writing the logic to manage, your application classes are free from transaction related logic and if you want to switch or don't want to use transactions you don't need to modify your logic.<br><br> 
As transactions is a cross-cutting functionality, to implement transactionality we use declarative AOP configuration. In order to work with AOP based transactions, we need to import AOP and Tx Namespaces.<br><br> 
We begin and commit or rollback transactions on an operation, we will begin the transaction while entering a method and while returning from the method we will commit and if the method throws exception we will roll back the transaction. So, if you observe it is the combination of Around and Throws advice.<br><br> 
In order to manage it we need to declare an transactional advice which will manages the above said logic. In order to configure an transactional advice we need to use Tx namespace to declare it as shown below.</p>
<pre ><code class="language-java">&lttx:advice id="txAdvice" transaction-manager="transactionManager">  
&lttx:attributes>   
&lttx:method name="insert*" read-only="false"/>  
&lt/tx:attributes> 
&lt/tx:advice> </code></pre>
<p>The transaction advice will issue a commit or rollback on the transaction manager, so it needs a transaction manager to perform this, to declare a transaction manager; you need to pass the datasource as a reference to manage all the connections created by the datasource. read-only = "false" indicates you are performing an updatable operation. If you are performing only select type of operation you need to use readonly="true". Along with that you can specify the propagation attribute as well.</p>
<pre ><code class="language-java">&ltbean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">  
&ltproperty name="dataSource" ref="dataSource"/> 
&lt/bean>  </code></pre>
<p>Once the advice has been declared, you need to declare the classes on which you want to apply this advice using the &ltaop:confg&gt tag as shown below</p>
<pre ><code class="language-java">&ltaop:config>  
&ltaop:pointcut expression="execution(* com.dtx.service.*.*(..))" id="txpc"/>  
&ltaop:advisor advice-ref="txAdvice" pointcut-ref="txpc"/> 
&lt/aop:config> </code></pre>
<div style="text-align: left; background:#696969; padding:7px;"><span style="font-weight:bold;color:#ffffff">Typical Spring Project Flow</span></div>
<p>In a typical spring application, the transactionality will be imposed on Service tier classes, the same has been depicted in the below architecture.</p>
<img src="../images/seven2.jpg" width="100%" height="200px">
<p>Let us work on an example which follows the above architecture. In the below example we are trying to insert a Student, inserting a student involves inserting the Student information into student table as well as inserting into student course table. These two insertions has to be performed as part of single transactions. So the service will perform operations by using two dao's and the transaction is imposed on Service class. </p>
<p  style="font-weight:bold;color:#212121">EducationalController.java </p>
<pre ><code class="language-java">package com.dtx.controller; 
import com.dtx.service.AwwalSoftwareService; 
public class EducationalController {  
private AwwalSoftwareService AwwalSoftwareService; 
public void insert(int studentId, String name, int courseId) {   int outcome = 0; 
outcome = AwwalSoftwareService.insert(studentId, name, courseId);   
if (outcome > 0) {    
System.out.println("Student Inserted Successfully");   }  } 
public void setAwwalSoftwareService(    
AwwalSoftwareService AwwalSoftwareService) {   
this.AwwalSoftwareService = AwwalSoftwareService;  
} 
} </code></pre>
<p  style="font-weight:bold;color:#212121">AwwalSoftwareService.java</p>
<pre ><code class="language-java">package com.dtx.service; 
public interface AwwalSoftwareService {  
public int insert(int studentId, String name, int courseId); } </code></pre>
<p  style="font-weight:bold;color:#212121">AwwalSoftwareServiceImpl.java</p>
<pre ><code class="language-java">package com.dtx.service; 
import org.springframework.transaction.annotation.Transactional; 
import com.dtx.dao.StudentCourseDao; 
import com.dtx.dao.StudentDao; 
public class AwwalSoftwareServiceImpl implements AwwalSoftwareService {  
private StudentDao studentDao;  
private StudentCourseDao studentCourseDao; 
@Override  public int insert(int studentId, String name, int courseId) {   
int outcome = 0;   outcome = studentDao.insert(studentId, name);   
if (outcome > 0) {    
// re-intialize    
outcome = 0;    
outcome = studentCourseDao.insert(studentId, courseId);   
}   
return outcome;  
} 
public void setStudentDao(StudentDao studentDao) {   
this.studentDao = studentDao;  
} 
public void setStudentCourseDao(StudentCourseDao studentCourseDao) {   
this.studentCourseDao = studentCourseDao;  
} 
} </code></pre>
<p  style="font-weight:bold;color:#212121">StudentDao.java</p>
<pre ><code class="language-java">package com.dtx.dao; 
public interface StudentDao {  
public int insert(int studentId, String name); 
} </code></pre>
<p  style="font-weight:bold;color:#212121">StudentDaoImpl.java</p>
<pre ><code class="language-java">package com.dtx.dao; 
import org.springframework.jdbc.core.JdbcTemplate; 
public class StudentDaoImpl implements StudentDao {  
private final String SQL_INSERT_STUDENT = "INSERT INTO STUDENT(STUDENT_ID, NAME) VALUES(?,?)";  
private JdbcTemplate jdbcTemplate; 
public StudentDaoImpl(JdbcTemplate jdbcTemplate) {   
this.jdbcTemplate = jdbcTemplate;  
} 
@Override  public int insert(int studentId, String name) {   
return jdbcTemplate.update(SQL_INSERT_STUDENT, new Object[] {     
studentId, name });  
} 
} </code></pre>
<p  style="font-weight:bold;color:#212121">StudentCourseDao.java</p>
<pre ><code class="language-java">package com.dtx.dao; public interface StudentCourseDao {  
public int insert(int studentId, int courseId); 
}  </code></pre>
<p  style="font-weight:bold;color:#212121">StudentCourseDaoImpl.java</p>
<pre ><code class="language-java">package com.dtx.dao; 
import org.springframework.jdbc.core.JdbcTemplate; 
public class StudentCourseDaoImpl implements StudentCourseDao {  
private final String SQL_INSERT_STUDENTCOURSE = "INSERT INTO STUDENTCOURSE(STUDENT_ID, COURSE_ID) VALUES(?,?)";  
private JdbcTemplate jdbcTemplate; 
public StudentCourseDaoImpl(JdbcTemplate jdbcTemplate) {   
this.jdbcTemplate = jdbcTemplate;  } 
@Override  public int insert(int studentId, int courseId) {   
return jdbcTemplate.update(SQL_INSERT_STUDENTCOURSE, 
new Object[]{studentId,courseId});  
} 
} </code></pre>
<p  style="font-weight:bold;color:#212121">application-context.xml</p>
<pre ><code class="language-java">&ltbean id="educationalController" class="com.dtx.controller.EducationalController">  
&ltproperty name="AwwalSoftwareService" ref="AwwalSoftwareService" /> 
&lt/bean> 
&ltbean id="AwwalSoftwareService" class="com.dtx.service.AwwalSoftwareServiceImpl">  
&ltproperty name="studentDao" ref="studentDao" />  
&ltproperty name="studentCourseDao" ref="studentCourseDao" /> 
&lt/bean> 
&ltbean id="dataSource"  class="org.springframework.jdbc.datasource.DriverManagerDataSource">  
&ltproperty name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />  
&ltproperty name="url" value="jdbc:oracle:thin:@//localhost:1521/xe" />  
&ltproperty name="username" value="hr" />  
&ltproperty name="password" value="hr" /> 
&lt/bean> 
&ltbean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">  
&ltconstructor-arg ref="dataSource" /> 
&lt/bean> 
&ltbean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">  
&ltproperty name="dataSource" ref="dataSource"/> 
&lt/bean> 
&ltbean id="studentDao" class="com.dtx.dao.StudentDaoImpl">  
&ltconstructor-arg ref="jdbcTemplate" /> 
&lt/bean> 
&ltbean id="studentCourseDao" class="com.dtx.dao.StudentCourseDaoImpl">  
&ltconstructor-arg ref="jdbcTemplate" /> 
&lt/bean> 
&lttx:advice id="txAdvice" transaction-manager="transactionManager">  
&lttx:attributes>   
&lttx:method name="insert*" read-only="false"/>  
&lt/tx:attributes> 
&lt/tx:advice> 
&ltaop:config>  
&ltaop:pointcut expression="execution(* com.dtx.service.*.*(..))" id="txpc"/>  
&ltaop:advisor advice-ref="txAdvice" pointcut-ref="txpc"/> 
&lt/aop:config> </code></pre>
<div style="text-align: left; background:#696969; padding:7px;"><span style="font-weight:bold;color:#ffffff">Annotation approach Transaction Management </span></div>
<p>In this instead of declaring the transaction semantics in the declaration file we will directly annotate the class methods with @Transactional annotation. You can specify the readOnly and Propagation attributes in it.<br><br> 
In the earlier example instead of declaring the transactional semantics in the declaration, you can directly mark the service class methods with related to transaction annotation as shown below</p>
<p  style="font-weight:bold;color:#212121">AwwalSoftwareService.java</p>
<pre ><code class="language-java">package com.dtx.service; 
import org.springframework.transaction.annotation.Transactional; 
import com.dtx.dao.StudentCourseDao; 
import com.dtx.dao.StudentDao; 
public class AwwalSoftwareService implements AwwalSoftwareService {  
private StudentDao studentDao;  
private StudentCourseDao studentCourseDao; 
@Override  @Transactional(readOnly="false")  
public int insert(int studentId, String name, int courseId) {   
int outcome = 0;   
outcome = studentDao.insert(studentId, name);   
if (outcome > 0) {    
// re-intialize    
outcome = 0;    
outcome = studentCourseDao.insert(studentId, courseId);   
}   
return outcome;  
} 
public void setStudentDao(StudentDao studentDao) {   
this.studentDao = studentDao;  
} 
public void setStudentCourseDao(StudentCourseDao studentCourseDao) {   
this.studentCourseDao = studentCourseDao;  
} 
} </code></pre>
<p>In order to detect your annotations that has been marked at class level, you need to declare a tag in spring beans configuration file as </p>
<pre ><code class="language-java">&lttx:annotation-driven transaction-manager="transactionManager"/> </code></pre>







































































	
		
</div>
</div>
<script>var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-([\w-]+)\b/i,t=0,n=_self.Prism={manual:_self.Prism&&_self.Prism.manual,disableWorkerMessageHandler:_self.Prism&&_self.Prism.disableWorkerMessageHandler,util:{encode:function(e){return e instanceof r?new r(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e,t){var r=n.util.type(e);switch(t=t||{},r){case"Object":if(t[n.util.objId(e)])return t[n.util.objId(e)];var a={};t[n.util.objId(e)]=a;for(var l in e)e.hasOwnProperty(l)&&(a[l]=n.util.clone(e[l],t));return a;case"Array":if(t[n.util.objId(e)])return t[n.util.objId(e)];var a=[];return t[n.util.objId(e)]=a,e.forEach(function(e,r){a[r]=n.util.clone(e,t)}),a}return e}},languages:{extend:function(e,t){var r=n.util.clone(n.languages[e]);for(var a in t)r[a]=t[a];return r},insertBefore:function(e,t,r,a){a=a||n.languages;var l=a[e];if(2==arguments.length){r=arguments[1];for(var i in r)r.hasOwnProperty(i)&&(l[i]=r[i]);return l}var o={};for(var s in l)if(l.hasOwnProperty(s)){if(s==t)for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);o[s]=l[s]}return n.languages.DFS(n.languages,function(t,n){n===a[e]&&t!=e&&(this[t]=o)}),a[e]=o},DFS:function(e,t,r,a){a=a||{};for(var l in e)e.hasOwnProperty(l)&&(t.call(e,l,e[l],r||l),"Object"!==n.util.type(e[l])||a[n.util.objId(e[l])]?"Array"!==n.util.type(e[l])||a[n.util.objId(e[l])]||(a[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,l,a)):(a[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,null,a)))}},plugins:{},highlightAll:function(e,t){n.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,r){var a={callback:r,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",a);for(var l,i=a.elements||e.querySelectorAll(a.selector),o=0;l=i[o++];)n.highlightElement(l,t===!0,a.callback)},highlightElement:function(t,r,a){for(var l,i,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(l=(o.className.match(e)||[,""])[1].toLowerCase(),i=n.languages[l]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+l,t.parentNode&&(o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,"").replace(/\s+/g," ")+" language-"+l));var s=t.textContent,u={element:t,language:l,grammar:i,code:s};if(n.hooks.run("before-sanity-check",u),!u.code||!u.grammar)return u.code&&(n.hooks.run("before-highlight",u),u.element.textContent=u.code,n.hooks.run("after-highlight",u)),n.hooks.run("complete",u),void 0;if(n.hooks.run("before-highlight",u),r&&_self.Worker){var g=new Worker(n.filename);g.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,a&&a.call(u.element),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},g.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,a&&a.call(t),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},highlight:function(e,t,a){var l={code:e,grammar:t,language:a};return n.hooks.run("before-tokenize",l),l.tokens=n.tokenize(l.code,l.grammar),n.hooks.run("after-tokenize",l),r.stringify(n.util.encode(l.tokens),l.language)},matchGrammar:function(e,t,r,a,l,i,o){var s=n.Token;for(var u in r)if(r.hasOwnProperty(u)&&r[u]){if(u==o)return;var g=r[u];g="Array"===n.util.type(g)?g:[g];for(var c=0;c<g.length;++c){var h=g[c],f=h.inside,d=!!h.lookbehind,m=!!h.greedy,p=0,y=h.alias;if(m&&!h.pattern.global){var v=h.pattern.toString().match(/[imuy]*$/)[0];h.pattern=RegExp(h.pattern.source,v+"g")}h=h.pattern||h;for(var b=a,k=l;b<t.length;k+=t[b].length,++b){var w=t[b];if(t.length>e.length)return;if(!(w instanceof s)){if(m&&b!=t.length-1){h.lastIndex=k;var _=h.exec(e);if(!_)break;for(var j=_.index+(d?_[1].length:0),P=_.index+_[0].length,A=b,x=k,O=t.length;O>A&&(P>x||!t[A].type&&!t[A-1].greedy);++A)x+=t[A].length,j>=x&&(++b,k=x);if(t[b]instanceof s)continue;I=A-b,w=e.slice(k,x),_.index-=k}else{h.lastIndex=0;var _=h.exec(w),I=1}if(_){d&&(p=_[1]?_[1].length:0);var j=_.index+p,_=_[0].slice(p),P=j+_.length,N=w.slice(0,j),S=w.slice(P),C=[b,I];N&&(++b,k+=N.length,C.push(N));var E=new s(u,f?n.tokenize(_,f):_,y,_,m);if(C.push(E),S&&C.push(S),Array.prototype.splice.apply(t,C),1!=I&&n.matchGrammar(e,t,r,b,k,!0,u),i)break}else if(i)break}}}}},tokenize:function(e,t){var r=[e],a=t.rest;if(a){for(var l in a)t[l]=a[l];delete t.rest}return n.matchGrammar(e,r,t,0,0,!1),r},hooks:{all:{},add:function(e,t){var r=n.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=n.hooks.all[e];if(r&&r.length)for(var a,l=0;a=r[l++];)a(t)}}},r=n.Token=function(e,t,n,r,a){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length,this.greedy=!!a};if(r.stringify=function(e,t,a){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return r.stringify(n,t,e)}).join("");var l={type:e.type,content:r.stringify(e.content,t,a),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:a};if(e.alias){var i="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(l.classes,i)}n.hooks.run("wrap",l);var o=Object.keys(l.attributes).map(function(e){return e+'="'+(l.attributes[e]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+l.tag+' class="'+l.classes.join(" ")+'"'+(o?" "+o:"")+">"+l.content+"</"+l.tag+">"},!_self.document)return _self.addEventListener?(n.disableWorkerMessageHandler||_self.addEventListener("message",function(e){var t=JSON.parse(e.data),r=t.language,a=t.code,l=t.immediateClose;_self.postMessage(n.highlight(a,n.languages[r],r)),l&&_self.close()},!1),_self.Prism):_self.Prism;var a=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return a&&(n.filename=a.src,n.manual||a.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener("DOMContentLoaded",n.highlightAll))),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);
Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(?:true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};
Prism.languages.java=Prism.languages.extend("clike",{keyword:/\b(?:abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp-]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?[df]?/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),Prism.languages.insertBefore("java","function",{annotation:{alias:"punctuation",pattern:/(^|[^.])@\w+/,lookbehind:!0}}),Prism.languages.insertBefore("java","class-name",{generics:{pattern:/<\s*\w+(?:\.\w+)?(?:\s*,\s*\w+(?:\.\w+)?)*>/i,alias:"function",inside:{keyword:Prism.languages.java.keyword,punctuation:/[<>(),.:]/}}});
!function(){if("undefined"!=typeof self&&self.Prism&&self.document){var e="line-numbers",t=/\n(?!$)/g,n=function(e){var n=r(e),s=n["white-space"];if("pre-wrap"===s||"pre-line"===s){var l=e.querySelector("code"),i=e.querySelector(".line-numbers-rows"),a=e.querySelector(".line-numbers-sizer"),o=l.textContent.split(t);a||(a=document.createElement("span"),a.className="line-numbers-sizer",l.appendChild(a)),a.style.display="block",o.forEach(function(e,t){a.textContent=e||"\n";var n=a.getBoundingClientRect().height;i.children[t].style.height=n+"px"}),a.textContent="",a.style.display="none"}},r=function(e){return e?window.getComputedStyle?getComputedStyle(e):e.currentStyle||null:null};window.addEventListener("resize",function(){Array.prototype.forEach.call(document.querySelectorAll("pre."+e),n)}),Prism.hooks.add("complete",function(e){if(e.code){var r=e.element.parentNode,s=/\s*\bline-numbers\b\s*/;if(r&&/pre/i.test(r.nodeName)&&(s.test(r.className)||s.test(e.element.className))&&!e.element.querySelector(".line-numbers-rows")){s.test(e.element.className)&&(e.element.className=e.element.className.replace(s," ")),s.test(r.className)||(r.className+=" line-numbers");var l,i=e.code.match(t),a=i?i.length+1:1,o=new Array(a+1);o=o.join("<span></span>"),l=document.createElement("span"),l.setAttribute("aria-hidden","true"),l.className="line-numbers-rows",l.innerHTML=o,r.hasAttribute("data-start")&&(r.style.counterReset="linenumber "+(parseInt(r.getAttribute("data-start"),10)-1)),e.element.appendChild(l),n(r),Prism.hooks.run("line-numbers",e)}}}),Prism.hooks.add("line-numbers",function(e){e.plugins=e.plugins||{},e.plugins.lineNumbers=!0}),Prism.plugins.lineNumbers={getLine:function(t,n){if("PRE"===t.tagName&&t.classList.contains(e)){var r=t.querySelector(".line-numbers-rows"),s=parseInt(t.getAttribute("data-start"),10)||1,l=s+(r.children.length-1);s>n&&(n=s),n>l&&(n=l);var i=n-s;return r.children[i]}}}}}();
!function(){"undefined"!=typeof self&&!self.Prism||"undefined"!=typeof global&&!global.Prism||Prism.hooks.add("wrap",function(e){"keyword"===e.type&&e.classes.push("keyword-"+e.content)})}();
</script>
</body>
</html> 
